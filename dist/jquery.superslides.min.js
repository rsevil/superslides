/*! Superslides - v0.6.3-wip - 2014-05-18
* https://github.com/nicinabox/superslides
* Copyright (c) 2014 Nic Aitch; Licensed MIT */
(function(t,i){var e,n="superslides";e=function(e,n){this.options=i.extend({play:!1,inherit_width_from:t,inherit_height_from:t,pagination:!0,hashchange:!1,scrollable:!0,loop:!0,elements:{preserve:".preserve",nav:".slides-navigation",container:".slides-container",pagination:".slides-pagination"}},n);var s=this,a=i("<div>",{"class":"slides-control"}),r=1;this.$el=i(e),this.$container=this.$el.find(this.options.elements.container);var o=function(){return r=s._findMultiplier(),s.$el.on("click",s.options.elements.nav+" a",function(t){t.preventDefault(),s.stop(),i(this).hasClass("next")?s.animate("next",function(){s.start()}):s.animate("prev",function(){s.start()})}),i(document).on("keyup",function(t){37===t.keyCode&&s.animate("prev"),39===t.keyCode&&s.animate("next")}),i(t).on("resize orientationchange",function(){setTimeout(function(){var t=s.$container.children();s.width=s._findWidth(),s.height=s._findHeight(),t.css({width:s.width,left:s.width}),s.css.containers(),s.css.images()},10)}),t.Hammer&&new Hammer(s.$el[0],{dragLockToAxis:!0}).on("release dragleft dragright swipeleft swiperight",function(t){switch(t.gesture.preventDefault(),t.type){case"dragright":case"dragleft":var i=s.size(),e=s._findWidth(),n=-(100/i)*s.current,a=100/e*t.gesture.deltaX/i;(0==s.current&&"right"==t.gesture.direction||s.current==i-1&&"left"==t.gesture.direction)&&(a*=.4),s.setContainerOffset(a+n,!1);break;case"swipeleft":s.animate("next"),t.gesture.stopDetect();break;case"swiperight":s.animate("prev"),t.gesture.stopDetect();break;case"release":Math.abs(t.gesture.deltaX)>s._findWidth()/2?"right"==t.gesture.direction?s.animate("prev"):s.animate("next"):s.showPane({upcoming_slide:s.current},!0)}}),s.pagination._events(),s.start(),s},h={containers:function(){s.init?(s.$el.css({height:s.height}),s.$control.css({width:s.width}),s.$container.css({width:s.width*s.size()})):(i("body").css({margin:0}),s.$el.css({overflow:"hidden",width:"100%",height:s.height}),s.$control.css({height:"100%",width:s.width}),s.$container.css({display:"none",margin:"0",padding:"0",listStyle:"none",position:"relative",height:"100%",width:s.width*s.size()})),1===s.size()&&s.$el.find(s.options.elements.nav).hide()},images:function(){var t=s.$container.find("img").not(s.options.elements.preserve);t.removeAttr("width").removeAttr("height").css({"-webkit-backface-visibility":"hidden","-ms-interpolation-mode":"bicubic",position:"relative",left:"0",top:"0","z-index":"-1","max-width":"none"}),t.each(function(){var t=s.image._aspectRatio(this),e=this;if(i.data(this,"processed"))s.image._scale(e,t),s.image._center(e,t);else{var n=new Image;n.onload=function(){s.image._scale(e,t),s.image._center(e,t),i.data(e,"processed",!0)},n.src=this.src}})},children:function(){var t=s.$container.children();t.is("img")&&(t.each(function(){if(i(this).is("img")){i(this).wrap("<div>");var t=i(this).attr("id");i(this).removeAttr("id"),i(this).parent().attr("id",t)}}),t=s.$container.children()),t.css({overflow:"hidden",height:"100%",width:s.width,zIndex:0,"float":"left"})}},c={_centerY:function(t){var e=i(t);e.css({top:(s.height-e.height())/2})},_centerX:function(t){var e=i(t);e.css({left:(s.width-e.width())/2})},_center:function(t){s.image._centerX(t),s.image._centerY(t)},_aspectRatio:function(t){if(!t.naturalHeight&&!t.naturalWidth){var i=new Image;i.src=t.src,t.naturalHeight=i.height,t.naturalWidth=i.width}return t.naturalHeight/t.naturalWidth},_scale:function(t,e){e=e||s.image._aspectRatio(t);var n=s.height/s.width,a=i(t);n>e?a.css({height:s.height,width:s.height/e}):a.css({height:s.width*e,width:s.width})}},d={_setCurrent:function(t){if(s.$pagination){var i=s.$pagination.children();i.removeClass("current"),i.eq(t).addClass("current")}},_addItem:function(t){var e=t+1,n=e,a=s.$container.children().eq(t),r=a.attr("id");r&&(n=r);var o=i("<a>",{href:"#"+n,text:n});o.appendTo(s.$pagination)},_setup:function(){if(s.options.pagination&&1!==s.size()){var t=i("<nav>",{"class":s.options.elements.pagination.replace(/^\./,"")});s.$pagination=t.appendTo(s.$el);for(var e=0;s.size()>e;e++)s.pagination._addItem(e)}},_events:function(){s.$el.on("click",s.options.elements.pagination+" a",function(t){t.preventDefault();var i,e=s._parseHash(this.hash);i=s._upcomingSlide(e),i!==s.current&&s.animate(i,function(){s.start()})})}};return this.css=h,this.image=c,this.pagination=d,this.$control=this.$container.wrap(a).parent(".slides-control"),this.options.loop||this.$el.find(s.options.elements.nav+" a.prev").attr("disabled",!0),s._findPositions(),s.width=s._findWidth(),s.height=s._findHeight(),this.css.children(),this.css.containers(),this.css.images(),this.pagination._setup(),o()},e.prototype={_findWidth:function(){return i(this.options.inherit_width_from).width()},_findHeight:function(){return i(this.options.inherit_height_from).height()},_findMultiplier:function(){return 1===this.size()?1:3},_upcomingSlide:function(t){if(/next/.test(t))return this._nextInDom();if(/prev/.test(t))return this._prevInDom();if(/\d/.test(t))return+t;if(t&&/\w/.test(t)){var i=this._findSlideById(t);return i>=0?i:0}return 0},_findSlideById:function(t){return this.$container.find("#"+t).index()},_findPositions:function(t,i){i=i||this,void 0===t&&(t=-1),i.current=t,i.next=i._nextInDom(),i.prev=i._prevInDom()},_nextInDom:function(){var t=this.current+1;return this.options.loop||t!==this.size()?(t===this.size()&&(t=0),t):this.current},_prevInDom:function(){var t=this.current-1;return!this.options.loop&&0>t?this.current:(0>t&&(t=this.size()-1),t)},_parseHash:function(i){return i=i||t.location.hash,i=i.replace(/^#/,""),i&&!isNaN(+i)&&(i=+i),i-1},size:function(){return this.$container.children().length},destroy:function(){return this.$el.removeData()},update:function(){this.css.children(),this.css.containers(),this.css.images(),this.pagination._addItem(this.size()),this._findPositions(this.current),this.$el.trigger("updated.slides")},stop:function(){clearInterval(this.play_id),delete this.play_id,this.$el.trigger("stopped.slides")},start:function(){var t=this;this.animate(),this.options.play&&(this.play_id&&this.stop(),this.play_id=setInterval(function(){t.animate()},this.options.play)),this.$el.trigger("started.slides")},animate:function(t,i){var e=this,n={};if(!this.animating){if(this.animating=!0,void 0===t&&(t="next"),!e.options.loop&&(/next/.test(t)&&this.current==this.size()-1||/prev/.test(t)&&0==this.current))return this.animating=!1,void 0;if(n.upcoming_slide=this._upcomingSlide(t),n.outgoing_slide=this.current,!(n.upcoming_slide>=this.size())){if(!e.options.loop){var s=e.$el.find(e.options.elements.nav).removeClass("last-slide"),a=s.find("a").removeAttr("disabled");n.upcoming_slide==this.size()-1?(a.filter(".next").attr("disabled",!0),s.addClass("last-slide")):0==n.upcoming_slide&&a.filter(".prev").attr("disabled",!0)}e.$el.trigger("animating.slides",[n]),e.showPane(n,!0,function(){e.size()>1&&e.pagination._setCurrent(n.upcoming_slide),e._findPositions(n.upcoming_slide,e),"function"==typeof i&&i(),e.animating=!1,e.$el.trigger("animated.slides"),e.init||(e.$el.trigger("init.slides"),e.init=!0,e.$container.fadeIn("fast"))})}}},showPane:function(t,i,e){var n=-(100/this.size()*t.upcoming_slide);this.setContainerOffset(n,i,e)},setContainerOffset:function(i,e,n){if(this.$container.removeClass("animate"),e&&this.$container.addClass("animate"),t.Modernizr&&t.Modernizr.csstransitions)if(t.Modernizr.csstransforms3d)this.$container.css("transform","translate3d("+i+"%,0,0) scale3d(1,1,1)");else if(t.Modernizr.csstransforms)this.$container.css("transform","translate("+i+"%,0)");else{var s=this._findWidth()*this.size()/100*i;this.$container.css("left",s+"px")}else{this.$container.removeClass("animate");var s=this._findWidth()*this.size()/100*i;this.$container.animate({left:s+"px"})}n&&n()}},i.fn[n]=function(t,s){var a=[];return this.each(function(){var r,o,h;return r=i(this),o=r.data(n),h="object"==typeof t&&t,o||(a=r.data(n,o=new e(this,h))),"string"==typeof t&&(a=o[t],"function"==typeof a)?a=a.call(o,s):void 0}),a},i.fn[n].fx={}})(this,jQuery);